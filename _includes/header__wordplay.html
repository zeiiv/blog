{%- assign lang = page.lang | default: 'en' -%}
{%- assign nav_links = site.data.navigation.main -%}
{%- assign url_parts = page.url | split: '/' -%}
{%- assign current_page_slug = "" -%}
{%- if url_parts.size > 1 -%}
  {%- assign current_page_slug = url_parts[1] -%}
{%- endif -%}

<header class="wordplay-header" id="wordplay-header">
  <div class="wordplay-menu">
    
    <!-- Left: Static 'place' -->
    <div class="wordplay-zone zone-place">
      <div class="word-item">
        <a href="{{ '/' | relative_url }}" class="label-place">
          <div class="word" data-id="place">
            <span class="en">{{ site.data.config-text['en'].title }}</span>
            <span class="he">{{ site.data.config-text['he'].title }}</span>
          </div>
        </a>
      </div>
    </div>

    <div class="wordplay-zone zone-pinned">
      {% for item in nav_links.en %}
        {%- assign item_slug = item.url | remove: '/' -%}
        {% if item_slug == current_page_slug %}
          <div class="word-item">
            <a href="{{ item.url | relative_url }}" class="word" data-id="{{ item_slug }}" data-url="{{ item.url | relative_url }}">
              <span class="en">{{ item.title }}</span>
              <span class="he">{{ nav_links.he[forloop.index0].title }}</span>
            </a>
          </div>
        {% endif %}
      {% endfor %}
    </div>

    <div class="wordplay-zone zone-pile">
      {% for item in nav_links.en %}
        {%- assign item_slug = item.url | remove: '/' -%}
        {% unless item_slug == current_page_slug %}
          <div class="word-item">
            <a href="{{ item.url | relative_url }}" class="word" data-id="{{ item_slug }}">
              <span class="en">{{ item.title }}</span>
              <span class="he">{{ nav_links.he[forloop.index0].title }}</span>
            </a>
          </div>
        {% endunless %}
      {% endfor %}
    </div>

  </div>
</header>