{%- assign lang = page.lang | default: 'en' -%}
{%- assign nav_links_en = site.data.navigation.main.en -%}
{%- assign nav_links_he = site.data.navigation.main.he -%}

<header class="wordplay-header" id="wordplay-header">
  <div class="wordplay-menu">
    
    <!-- Zone 1: The static "place" word -->
    <div class="wordplay-zone zone-place">
      <div class="word-item static-word">
        <a href="{{ '/' | relative_url }}" class="label-place">
          <div class="word" data-id="place">
            <span class="en">{{ site.data.config-text['en'].title }}</span>
            <span class="he">{{ site.data.config-text['he'].title }}</span>
          </div>
        </a>
      </div>
    </div>

    <!-- Zone 2: The Pinned Word. This zone will be empty on the homepage. -->
    <div class="wordplay-zone zone-pinned">
      {%- comment -%}
        This is the corrected logic, inspired by your earlier working version.
        It directly compares the page's URL with the URL from your navigation data.
        This is the most reliable way to identify the current page.
      {%- endcomment -%}
      {% for item in nav_links_en %}
        {% if item.url == page.url %}
          <div class="word-item pinned-word">
            <a href="{{ item.url | relative_url }}" class="word" data-id="{{ item.title | slugify }}">
              <span class="en">{{ item.title }}</span>
              <span class="he">{{ nav_links_he[forloop.index0].title }}</span>
            </a>
          </div>
        {% endif %}
      {% endfor %}
    </div>

    <!-- Zone 3: The Pile of other words -->
    <div class="wordplay-zone zone-pile">
      {% for item in nav_links_en %}
        {%- comment -%}
          This logic now correctly renders every word that is NOT for the current page.
        {%- endcomment -%}
        {% unless item.url == page.url %}
          <div class="word-item">
            <a href="{{ item.url | relative_url }}" class="word" data-id="{{ item.title | slugify }}">
              <span class="en">{{ item.title }}</span>
              <span class="he">{{ nav_links_he[forloop.index0].title }}</span>
            </a>
          </div>
        {% endunless %}
      {% endfor %}
    </div>

  </div>
</header>
